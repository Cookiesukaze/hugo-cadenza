document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("menu-search-input");e&&e.addEventListener("input",function(){const n=this.value.toLowerCase(),t=document.querySelectorAll(".menu-item"),s=document.querySelector(".no-search-results");if(s&&s.remove(),n===""){t.forEach(function(e){e.style.display=""}),document.querySelectorAll(".submenu").forEach(function(e){e.classList.remove("show")}),document.querySelectorAll(".menu-toggle").forEach(function(e){e.classList.remove("open");const t=e.querySelector(".toggle-icon");t&&(t.textContent="+")});return}const i=n.split(/\s+/),a=[];i.forEach(e=>{let t="text",n=e;e.startsWith("#")?(t="tag",n=e.substring(1)):e.startsWith("@")?(t="category",n=e.substring(1)):e.startsWith("!")?(t="title",n=e.substring(1)):e.startsWith("~")&&(t="content",n=e.substring(1)),a.push({type:t,value:n})});let o=!1;if(t.forEach(function(e){e.style.display="none"}),t.forEach(function(e){let t=!1;if(searchType==="tag"){const s=e.getAttribute("data-tags")||"";s.toLowerCase().includes(searchValue)&&(t=!0);const n=e.querySelector(".menu-item-tags");n&&n.textContent.toLowerCase().includes("#"+searchValue)&&(t=!0);const o=e.textContent.toLowerCase();o.includes("#"+searchValue)&&(t=!0)}else if(searchType==="category"){const n=e.getAttribute("data-category")||"";n.toLowerCase().includes(searchValue)&&(t=!0);const s=e.textContent.toLowerCase();s.includes(searchValue)&&(t=!0)}else{const n=e.textContent.toLowerCase();n.includes(searchValue)&&(t=!0)}if(t){e.style.display="",o=!0;let t=e.parentElement;for(;t;){if(t.classList.contains("submenu")){t.classList.add("show");const s=t.id,e=document.querySelector(`[data-target="#${s}"]`);if(e){e.classList.add("open");const t=e.querySelector(".toggle-icon");t&&(t.textContent="−")}const n=t.closest(".menu-item");n&&(n.style.display="")}t=t.parentElement}}}),document.querySelectorAll(".menu-root").forEach(function(e){e.style.display=""}),!o){const t=document.createElement("div");t.className="no-search-results",t.textContent="没有找到匹配的项目",e.parentNode.appendChild(t)}});const t=document.getElementById("mobile-menu-toggle");t&&t.addEventListener("click",function(){const e=document.querySelector(".article-menu"),t=document.querySelector(".list-menu");e?e.classList.toggle("mobile-visible"):t&&t.classList.toggle("mobile-visible")}),document.addEventListener("click",function(e){if(!e.target.closest(".article-menu")&&!e.target.closest(".list-menu")&&!e.target.closest("#mobile-menu-toggle")){const e=document.querySelector(".mobile-visible");e&&e.classList.remove("mobile-visible")}})})