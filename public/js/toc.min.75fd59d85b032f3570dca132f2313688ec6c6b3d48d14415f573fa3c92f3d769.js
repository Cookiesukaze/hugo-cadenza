document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".toc-content ul li a");e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href").substring(1),n=document.getElementById(t);n&&(window.scrollTo({top:n.offsetTop-20,behavior:"smooth"}),history.pushState(null,null,`#${t}`))})});const t=document.querySelectorAll(".toc-content ul li");t.forEach(e=>{const t=e.querySelector("ul");if(t){const n=document.createElement("span");n.className="toc-toggle",n.innerHTML='<i class="toc-toggle-icon">▼</i>';const s=e.querySelector("a");s&&e.insertBefore(n,s),n.addEventListener("click",function(){this.classList.toggle("collapsed"),this.classList.contains("collapsed")?(this.querySelector(".toc-toggle-icon").textContent="▶",t.style.display="none"):(this.querySelector(".toc-toggle-icon").textContent="▼",t.style.display="block")})}}),addHierarchyNumbers()});function addHierarchyNumbers(){const e=document.querySelectorAll(".toc-content > nav > ul > li");e.forEach((e,t)=>{addNumberToItem(e,`${t+1}`);const n=e.querySelectorAll(":scope > ul > li");n.forEach((e,n)=>{addNumberToItem(e,`${t+1}.${n+1}`);const s=e.querySelectorAll(":scope > ul > li");s.forEach((e,s)=>{addNumberToItem(e,`${t+1}.${n+1}.${s+1}`)})})})}function addNumberToItem(e,t){const n=e.querySelector("a");if(n){const e=document.createElement("span");e.className="toc-number",e.textContent=t,n.insertBefore(e,n.firstChild)}}