document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll("pre code");e.forEach(function(e,t){const a=e.parentElement,n=document.createElement("div");n.className="code-block",n.id="code-block-"+t;let s="";const l=e.className.split(" ");for(const e of l)if(e.startsWith("language-")){s=e.replace("language-","");break}if(!s&&e.textContent.trim().startsWith("```")){const t=e.textContent.trim().split(`
`)[0];s=t.replace("```","").trim(),s&&(e.textContent=e.textContent.replace(t+`
`,""))}const i=document.createElement("div");i.className="code-header";const r=document.createElement("span");r.className="code-language",r.textContent=s||"code",i.appendChild(r);const o=document.createElement("button");o.className="code-copy-button",o.textContent="复制",o.setAttribute("aria-label","复制代码"),o.setAttribute("data-target","code-block-"+t),i.appendChild(o);const c=document.createElement("div");c.className="code-copy-feedback",c.textContent="已复制!",a.parentNode.insertBefore(n,a),n.appendChild(i),n.appendChild(a),n.appendChild(c),e.textContent.split(`
`).length>1&&n.classList.add("line-numbers")}),document.querySelectorAll(".code-copy-button").forEach(function(e){e.addEventListener("click",function(){const t=e.getAttribute("data-target"),n=document.getElementById(t).querySelector("code"),s=n.textContent;navigator.clipboard.writeText(s).then(function(){const t=e.closest(".code-block").querySelector(".code-copy-feedback");t.classList.add("visible"),setTimeout(function(){t.classList.remove("visible")},2e3)}).catch(function(e){console.error("Could not copy text: ",e)})})})})