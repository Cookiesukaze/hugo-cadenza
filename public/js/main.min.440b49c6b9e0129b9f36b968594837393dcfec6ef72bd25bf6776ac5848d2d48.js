document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("menu-search-input");e&&e.addEventListener("input",function(){const s=this.value.toLowerCase(),t=document.querySelectorAll(".menu-item"),o=document.querySelector(".no-search-results");if(o&&o.remove(),s===""){t.forEach(function(e){e.style.display=""}),document.querySelectorAll(".submenu").forEach(function(e){e.classList.remove("show")}),document.querySelectorAll(".menu-toggle").forEach(function(e){e.classList.remove("open");const t=e.querySelector(".toggle-icon");t&&(t.textContent="+")});return}const a=s.split(/\s+/),n=[];a.forEach(e=>{let t="text",s=e;e.startsWith("#")?(t="tag",s=e.substring(1)):e.startsWith("@")?(t="category",s=e.substring(1)):e.startsWith("!")?(t="title",s=e.substring(1)):e.startsWith("~")&&(t="content",s=e.substring(1)),n.push({type:t,value:s})});let i=!1;if(t.forEach(function(e){e.style.display="none"}),t.forEach(function(e){let t=n.length>0;for(const s of n){let o=!1;if(s.type==="tag"){const n=e.getAttribute("data-tags")||"";n.toLowerCase().includes(s.value)&&(o=!0);const t=e.querySelector(".menu-item-tags");t&&t.textContent.toLowerCase().includes("#"+s.value)&&(o=!0);const i=e.textContent.toLowerCase();i.includes("#"+s.value)&&(o=!0)}else if(s.type==="category"){const t=e.getAttribute("data-category")||"";t.toLowerCase().includes(s.value)&&(o=!0);const n=e.textContent.toLowerCase();n.includes(s.value)&&(o=!0)}else if(s.type==="title"){const t=e.getAttribute("data-title")||"";t.toLowerCase().includes(s.value)&&(o=!0);const n=e.textContent.toLowerCase();n.includes(s.value)&&(o=!0)}else if(s.type==="content"){const t=e.textContent.toLowerCase();t.includes(s.value)&&(o=!0)}else{const t=e.textContent.toLowerCase();t.includes(s.value)&&(o=!0)}if(!o){t=!1;break}}if(t){e.style.display="",i=!0;let t=e.parentElement;for(;t;){if(t.classList.contains("submenu")){t.classList.add("show");const s=t.id,e=document.querySelector(`[data-target="#${s}"]`);if(e){e.classList.add("open");const t=e.querySelector(".toggle-icon");t&&(t.textContent="−")}const n=t.closest(".menu-item");n&&(n.style.display="")}t=t.parentElement}}}),document.querySelectorAll(".menu-root").forEach(function(e){e.style.display=""}),!i){const t=document.createElement("div");t.className="no-search-results",t.textContent="没有找到匹配的项目",e.parentNode.appendChild(t)}});const t=document.getElementById("mobile-menu-toggle");t&&t.addEventListener("click",function(){const e=document.querySelector(".article-menu"),t=document.querySelector(".list-menu");e?e.classList.toggle("mobile-visible"):t&&t.classList.toggle("mobile-visible")}),document.addEventListener("click",function(e){if(!e.target.closest(".article-menu")&&!e.target.closest(".list-menu")&&!e.target.closest("#mobile-menu-toggle")){const e=document.querySelector(".mobile-visible");e&&e.classList.remove("mobile-visible")}})})